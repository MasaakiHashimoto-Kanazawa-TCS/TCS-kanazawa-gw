# Implementation Plan

- [x] 1. プロジェクト基盤の設定とコア型定義

  - Next.js プロジェクトの基本設定を確認し、必要な依存関係を追加
  - TypeScript 型定義ファイルを作成（Plant, SensorData, Alert, ApiResponse など）
  - 現在のデータタイプ（温度、pH）に対応し、将来の拡張性を考慮した型設計を実装
  - 基本的なユーティリティ関数とヘルパーを実装
  - _Requirements: 1.1, 1.2, 1.3, 6.1, 6.2, 7.1_

- [x] 2. API クライアントとデータサービスの実装

  - [x] 2.1 API クライアントクラスの作成

    - fetch API をラップした API クライアントクラスを実装
    - エラーハンドリングとレスポンス変換機能を追加
    - 環境変数から API ベース URL を取得する設定を実装
    - _Requirements: 1.1, 1.3, 7.3_

  - [x] 2.2 センサーデータサービスの実装

    - センサーデータ取得のためのサービス関数を実装（温度、pH 対応）
    - 最新データ、履歴データ、サマリーデータの取得機能を作成
    - データ変換とバリデーション機能を実装（将来のデータタイプ追加に対応）
    - _Requirements: 1.1, 1.2, 2.1, 2.2_

  - [x] 2.3 植物データサービスの実装
    - 植物データ取得・更新のためのサービス関数を実装
    - 閾値設定とバリデーション機能を追加
    - 植物健康状態評価機能を実装
    - _Requirements: 1.1, 1.2, 4.1, 4.2_

- [x] 3. カスタムフックの実装

  - [x] 3.1 データ取得フック（usePlantData, useSensorData）の作成

    - 植物データを取得・管理するカスタムフックを実装
    - センサーデータのリアルタイム取得機能を実装
    - ローディング状態とエラー状態の管理を追加
    - 自動更新機能（30 秒間隔）を実装
    - _Requirements: 1.1, 1.2, 6.2_

  - [x] 3.2 汎用 API データフック（useApiData）の実装

    - 汎用的な API データ取得・管理フックを実装
    - キャッシュ機能とリフェッチ機能を追加
    - エラーハンドリングとローディング状態管理を実装
    - _Requirements: 1.1, 1.2, 6.1, 6.2_

  - [x] 3.3 レスポンシブデザインフック（useResponsive）の実装
    - 画面サイズ検出とブレークポイント管理フックを実装
    - モバイル・タブレット・デスクトップの判定機能を追加
    - _Requirements: 5.1, 5.2_

- [x] 4. 基本 UI コンポーネントの作成

  - [x] 4.1 レイアウトコンポーネントの実装

    - AppLayout、Header、Navigation コンポーネントを作成
    - レスポンシブナビゲーションメニューを実装
    - 共通のページレイアウト構造を定義
    - _Requirements: 5.1, 5.2, 7.1, 7.2_

  - [x] 4.2 基本 UI コンポーネントの実装
    - Button、Card、Modal、LoadingSpinner コンポーネントを作成
    - エラーメッセージ表示コンポーネントを実装
    - Badge、Input、Select コンポーネントを追加
    - アクセシビリティ対応（ARIA 属性、キーボードナビゲーション）を追加
    - _Requirements: 7.1, 7.2, 7.3_

- [ ] 5. ダッシュボード機能の実装

  - [x] 5.1 植物カードコンポーネントの作成

    - 個別植物の状態を表示する PlantCard コンポーネントを実装
    - 現在の環境データ（温度、pH）の表示機能を追加（将来的な拡張性を考慮した設計）

    - 植物の健康状態インジケーターを実装

    - _Requirements: 1.1, 4.1, 4.2_

  - [x] 5.2 ダッシュボード概要ページの実装

    - 全植物の概要を表示する DashboardOverview コンポーネントを作成
    - リアルタイムデータ更新機能を実装
    - 植物選択とナビゲーション機能を追加
    - 自動更新チェックボックス機能を実装
    - _Requirements: 1.1, 1.2, 4.1, 4.2_

  - [x] 5.3 メトリクスグリッドコンポーネントの実装
    - 温度・pH 値の表示とステータス表示機能を実装
    - 閾値範囲表示と健康状態インジケーターを追加
    - 視覚的なプログレスバー表示機能を実装
    - _Requirements: 1.1, 4.1, 4.2_

- [x] 6. チャート・グラフ機能の実装

  - [x] 6.1 時系列チャートコンポーネントの作成

    - Recharts を使用した時系列グラフを実装
    - 温度、pH の履歴データ表示機能を作成（将来的なデータタイプ追加に対応可能な設計）
    - グラフのインタラクション（ツールチップ、レスポンシブ表示）を実装
    - _Requirements: 2.1, 2.2, 2.3_

  - [x] 6.2 期間選択とフィルタリング機能の実装

    - 24 時間、7 日間、30 日間、150 日間の期間選択機能を実装
    - データタイプ別のフィルタリング機能を追加
    - カスタム日付範囲選択機能を実装
    - グラフの動的更新機能を実装
    - _Requirements: 2.1, 2.2_

  - [x] 6.3 チャートコントロール機能の実装
    - 期間選択、データタイプ選択のコントロールパネルを実装
    - 自動更新機能のオン/オフ切り替えを追加
    - カスタム日付範囲ピッカーを実装
    - _Requirements: 2.1, 2.2, 6.2_

- [x] 7. アラート・通知システムの実装

  - [x] 7.1 アラート表示コンポーネントの作成

    - AlertBanner、AlertCard コンポーネントを実装
    - 視覚的なアラート表示（色分け、アイコン）を追加
    - アラートの重要度別表示機能を実装
    - _Requirements: 3.1, 3.2_

  - [x] 7.2 アラート管理機能の実装

    - アラートの確認・解除機能を実装
    - 推奨アクション表示機能を追加
    - アラート履歴の表示機能を実装
    - _Requirements: 3.2, 3.3_

- [x] 8. 植物情報表示機能の実装

  - [x] 8.1 植物詳細情報の表示

    - 単一植物の詳細情報表示機能を実装
    - 植物のセンサーデータとグラフ表示機能を実装
    - 植物の基本情報（名前、種類、場所）の表示を追加
    - _Requirements: 4.1, 4.2_

  - [x] 8.2 植物詳細ページの実装

    - 個別植物の詳細ページ（/plant）を実装
    - 最新データ表示とリアルタイム更新機能を追加
    - 時系列チャートとの統合を実装
    - _Requirements: 4.1, 4.2, 2.1, 2.2_

  - [x] 8.3 履歴ページの実装
    - 履歴データ表示ページ（/history）を実装
    - 時系列チャートとコントロール機能を統合
    - 期間選択とデータタイプフィルタリング機能を実装
    - _Requirements: 2.1, 2.2, 2.3_

- [x] 9. レスポンシブデザインとモバイル対応

  - [x] 9.1 モバイルレイアウトの実装

    - Tailwind CSS を使用したレスポンシブグリッドシステムを実装
    - モバイル専用ナビゲーション（ハンバーガーメニュー）を作成
    - タッチ操作に最適化された UI コンポーネントを実装
    - _Requirements: 5.1, 5.2, 5.3_

  - [x] 9.2 画面サイズ別最適化の実装

    - ブレークポイント別のレイアウト調整を実装
    - モバイルでのチャート表示最適化を追加
    - タブレット向けの中間レイアウトを実装
    - _Requirements: 5.1, 5.2_

- [x] 10. パフォーマンス最適化の実装

  - [x] 10.1 データ取得最適化の実装

    - データキャッシュ機能を実装（useApiData フック）
    - 自動更新機能によるバックグラウンドデータ更新を実装
    - エラーハンドリングとリトライ機能を追加
    - _Requirements: 6.1, 6.2, 6.3_

  - [x] 10.2 レンダリング最適化の実装
    - useMemo/useCallback による計算結果キャッシュを追加
    - コンポーネントの適切な分割と最適化を実装
    - レスポンシブデザインによる効率的なレンダリングを実装
    - _Requirements: 6.1, 6.2, 6.3_

- [x] 11. エラーハンドリングとユーザビリティの向上

  - [x] 11.1 エラー境界とエラー表示の実装

    - ユーザーフレンドリーなエラーメッセージ表示を追加
    - エラー復旧機能（更新ボタン）を実装
    - 適切なフォールバック表示を実装
    - _Requirements: 1.3, 7.3_

  - [x] 11.2 ローディング状態とフィードバックの実装
    - 各種ローディングインジケーターを実装
    - ユーザーアクションに対するフィードバック表示を追加
    - データ取得中の適切な状態表示を実装
    - _Requirements: 6.1, 6.2, 7.2_

- [x] 11.5. データ整合性とバグ修正

  - [x] 11.5.1 pH/温度データの一貫性修正

    - フロントエンドでの pH 表記統一（'ph' → 'pH'）を実装
    - DynamoDB データとの整合性を確保
    - データ変換関数の修正を実装
    - _Requirements: 1.1, 1.2, 2.1_

  - [x] 11.5.2 閾値処理のエラー修正
    - undefined 閾値に対する適切なエラーハンドリングを実装
    - 植物データ更新時の閾値保持機能を修正
    - TypeScript 型安全性の向上を実装
    - _Requirements: 1.3, 4.1, 4.2_

- [ ] 12. テストの実装

  - [ ] 12.1 コンポーネントテストの作成

    - 主要コンポーネントのユニットテストを実装
    - React Testing Library を使用したインタラクションテストを追加
    - スナップショットテストによる回帰テストを実装
    - _Requirements: 全要件のテストカバレッジ_

  - [ ] 12.2 統合テストと E2E テストの実装
    - カスタムフックの統合テストを実装
    - ユーザーフローの統合テストを追加
    - API モックを使用したエンドツーエンドテストを実装
    - _Requirements: 全要件の統合テスト_

- [ ] 13. 最終統合とデプロイ準備

  - [ ] 13.1 全機能の統合とテスト

    - 全コンポーネントとページの統合を完了
    - クロスブラウザテストを実行
    - パフォーマンステストとアクセシビリティテストを実施
    - _Requirements: 全要件の最終確認_

  - [ ] 13.2 デモ環境設定とビルド最適化
    - デモ用環境変数の設定を実装
    - Next.js ビルド最適化設定を追加
    - 基本的なメタデータ設定を実装
    - _Requirements: 6.1, 6.2, 6.3_
